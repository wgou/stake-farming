"use strict";(window.webpackChunketh_farming_vue=window.webpackChunketh_farming_vue||[]).push([[382,602],{55382:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(88602),i=n(71081),s={data:function(){return{dynamicMenuRoutes:[],unReadTimer:null,unRead:0,noUnReadCounter:0}},components:{SubMenu:a.default},computed:{sidebarLayoutSkin:{get:function(){return this.$store.state.common.sidebarLayoutSkin}},sidebarFold:{get:function(){return this.$store.state.common.sidebarFold}},menuList:{get:function(){return this.$store.state.common.menuList},set:function(e){this.$store.commit("common/updateMenuList",e)}},menuActiveName:{get:function(){return this.$store.state.common.menuActiveName},set:function(e){this.$store.commit("common/updateMenuActiveName",e)}},mainTabs:{get:function(){return this.$store.state.common.mainTabs},set:function(e){this.$store.commit("common/updateMainTabs",e)}},mainTabsActiveName:{get:function(){return this.$store.state.common.mainTabsActiveName},set:function(e){this.$store.commit("common/updateMainTabsActiveName",e)}}},watch:{$route:"routeHandle"},created:function(){this.menuList=JSON.parse(sessionStorage.getItem("menuList")||"[]"),this.dynamicMenuRoutes=JSON.parse(sessionStorage.getItem("dynamicMenuRoutes")||"[]"),this.routeHandle(this.$route)},mounted:function(){var e=this;this.unReadTimer=setInterval(function(){e.getUnRead()},5e3)},beforeDestroy:function(){this.unReadTimer&&(clearInterval(this.unReadTimer),this.stopMusic(),this.unReadTimer=null)},methods:{getUnRead:function(){var e=this;this.$http({url:this.$http.adornUrl("/admin/message/unRead"),method:"post",data:{}}).then(function(t){var n=t.data;n.success?(n.data>0&&e.noUnReadCounter++,n.data>0&&(e.noUnReadCounter>=3||e.unRead!=n.data)&&(e.playMusic(),e.noUnReadCounter=0),e.unRead=n.data):e.unRead=0})},playMusic:function(){this.stopMusic(),this.$refs.music.play()},stopMusic:function(){this.$refs.music.pause(),this.$refs.music.load()},routeHandle:function(e){if(e.meta.isTab){var t=this.mainTabs.filter(function(t){return t.name===e.name})[0];if(!t){if(e.meta.isDynamic&&!(e=this.dynamicMenuRoutes.filter(function(t){return t.name===e.name})[0]))return;t={menuId:e.meta.menuId||e.name,name:e.name,title:e.meta.title,type:(0,i.mv)(e.meta.iframeUrl)?"iframe":"module",iframeUrl:e.meta.iframeUrl||""},this.mainTabs=this.mainTabs.concat(t)}this.menuActiveName=t.menuId+"",this.mainTabsActiveName=t.name}}}},u=(0,n(14486).A)(s,function(){var e=this,t=e._self._c;return t("aside",{staticClass:"site-sidebar",class:"site-sidebar--"+e.sidebarLayoutSkin},[t("div",{staticClass:"site-sidebar__inner"},[t("el-menu",{staticClass:"site-sidebar__menu",attrs:{"default-active":e.menuActiveName||"home",collapse:e.sidebarFold,collapseTransition:!1}},e._l(e.menuList,function(n){return t("sub-menu",{key:n.menuId,attrs:{menu:n,dynamicMenuRoutes:e.dynamicMenuRoutes,unRead:e.unRead}})}),1),t("audio",{ref:"music",attrs:{src:n(65290),type:"audio/mpeg",hidden:""}})],1)])},[],!1,null,null,null).exports},65290:function(e,t,n){e.exports=n.p+"static/media/y1478.8b23f63.wav"},88602:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var a={name:"sub-menu",props:{unRead:{type:Number,default:0},menu:{type:Object,required:!0},dynamicMenuRoutes:{type:Array,required:!0}},components:{SubMenu:i},computed:{sidebarLayoutSkin:{get:function(){return this.$store.state.common.sidebarLayoutSkin}}},methods:{gotoRouteHandle:function(e){var t=this.dynamicMenuRoutes.filter(function(t){return t.meta.menuId===e.menuId});t.length>=1&&this.$route.name!==t[0].name&&this.$router.push({name:t[0].name}).catch(function(e){})}}},i=(0,n(14486).A)(a,function(){var e=this,t=e._self._c;return e.menu.list&&e.menu.list.length>=1?t("el-submenu",{attrs:{index:e.menu.menuId+"","popper-class":"site-sidebar--"+e.sidebarLayoutSkin+"-popper"}},[t("template",{slot:"title"},[t("icon-svg",{staticClass:"site-sidebar__menu-icon",attrs:{name:e.menu.icon||""}}),t("span",[e._v(e._s(e.menu.name))])],1),e._l(e.menu.list,function(n){return t("sub-menu",{key:n.menuId,attrs:{menu:n,dynamicMenuRoutes:e.dynamicMenuRoutes}})})],2):t("el-menu-item",{attrs:{index:e.menu.menuId+""},on:{click:function(t){return e.gotoRouteHandle(e.menu)}}},[t("icon-svg",{staticClass:"site-sidebar__menu-icon",attrs:{name:e.menu.icon||""}}),t("span",[e._v(e._s(e.menu.name))]),"客服管理"===e.menu.name&&e.unRead>0?t("span",{staticClass:"unread-badge"},[e._v(e._s(e.unRead))]):e._e()],1)},[],!1,null,"cb5ff33c",null).exports}}]);