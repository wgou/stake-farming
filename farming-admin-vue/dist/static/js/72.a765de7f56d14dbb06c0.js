"use strict";(window.webpackChunketh_farming_vue=window.webpackChunketh_farming_vue||[]).push([[72],{1254:function(e){e.exports="data:image/png;base64,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"},32072:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var i,n=s(54705),a=null,c=null,r=0,o=new Audio(s(65290)),l=null,d=function(e,t,s,n){n&&(l=n),i&&i.readyState===WebSocket.OPEN||((i=new WebSocket("wss://admin.ftxbx.org/ws/".concat(e))).onopen=function(){t.$message.success("WebSocket 连接成功"),u(),r=0,c&&clearTimeout(c),l&&l("open")},i.onmessage=function(e){var t=JSON.parse(e.data);2!==t.type&&(k(),s(t))},i.onclose=function(i){m(),l&&l("closed"),g(e,t,s)},i.onerror=function(n){m(),l&&l("error"),i.close(),g(e,t,s)})};function g(e,t,s){if(r>=10)return l&&l("fail"),void t.$message.error("WebSocket 重连失败，请刷新页面");r++,l&&l("reconnecting"),t.$message.error("WebSocket 连接断开，正在重连..."),c=setTimeout(function(){d(e,t,s,l)},2e3*r)}var u=function(){a=setInterval(function(){i&&i.readyState===WebSocket.OPEN&&i.send(JSON.stringify({type:2,content:"ping"}))},5e3)},m=function(){a&&(clearInterval(a),a=null)},h=function(e,t,s,i){var n,a,c,r,o,l,d;return{id:e+"-"+(new Date).getTime(),type:s,flag:1,senderId:e,reciverId:t,content:i,created:(n=new Date,a=n.getFullYear(),c=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),o=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0"),d=String(n.getSeconds()).padStart(2,"0"),"".concat(a,"-").concat(c,"-").concat(r," ").concat(o,":").concat(l,":").concat(d))}},p=function(e){if(i&&i.readyState===WebSocket.OPEN){try{i.send(JSON.stringify(e))}catch(t){}return!0}return!1},k=function(){try{o.play()}catch(e){}};function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}var A={name:"commodityOrder",data:function(){return{queryParams:{},msg:"",users:[],messages:[],selectedMessages:[],isCheckboxDisabled:!1,selectedUser:null,selectPoolsId:"",cancelShow:!1,selectedUserName:"",imageUrl:"",timer:null,heartbeatInterval:null,imageModalVisible:!1,currentImage:"",connectionStatus:"open",reconnectingNotified:!1}},created:function(){this.fetchUsers()},mounted:function(){var e=this;this.$refs.selectImgInp.value=null,this.fetchUsers(),this.initWebSocket(),this.timer=setInterval(function(){e.refreshUsers()},3e3)},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach(function(t){(0,n.A)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},(0,s(95353).L8)(["pools","userId"])),methods:{refreshUsers:function(){var e=document.querySelector(".list-user")?document.querySelector(".list-user"):this.$refs.listUserRef;if(e){var t=e.scrollTop;this.fetchUsers(),this.$nextTick(function(){e&&(e.scrollTop=t)})}},selectMsg:function(){this.isCheckboxDisabled=!0,this.cancelShow=!0},cancelMessages:function(){this.selectedMessages=[],this.isCheckboxDisabled=!1,this.cancelShow=!1},deleteMessages:function(){var e=this;if(0!=this.selectedMessages.length)if(this.userId==this.selectPoolsId){var t=this.selectedMessages;this.$http({url:this.$http.adornUrl("/admin/message/del"),method:"post",data:this.$http.adornData({messageIds:t})}).then(function(t){var s=t.data;s.success?(e.messages=e.messages.filter(function(t){return!e.selectedMessages.includes(t.id)}),e.scrollToBottom(),e.selectedMessages=[],e.isCheckboxDisabled=!1,e.cancelShow=!1):(e.$message.error(s.msg),e.selectedMessages=[],e.isCheckboxDisabled=!1,e.cancelShow=!1)})}else this.$message.error("您不是当前用户的管理员,无法删除消息.")},openImageModal:function(e){this.currentImage=e,this.imageModalVisible=!0},closeImageModal:function(){this.currentImage="",this.imageModalVisible=!1},formatWallet:function(e){return e.length<=20?e:e.substring(0,12)+"..."+e.substring(e.length-12)},selectUser:function(e,t,s){this.selectedUser=e,this.selectedUserName=t,this.selectPoolsId=s,this.getMessageList()},onMessageReceived:function(e){e.senderId==this.selectedUser&&(this.messages.push(e),p(h(this.userId,this.selectedUser,3,"ready"))),this.scrollToBottom()},fetchUsers:function(){var e=this;this.$http({url:this.$http.adornUrl("/admin/message/listUser"),method:"post"}).then(function(t){var s=t.data;s.success?e.users=s.data:e.$message.error(s.msg)})},scrollToBottom:function(){var e=document.getElementById("scrollBox");this.$nextTick(function(){e.scrollTop=e.scrollHeight})},sendMoreHandle:function(){this.$refs.selectImgInp.click()},handleFileChange:function(e){var t=e.target.files[0];if(t)if(t.size>5242880)alert("请选择小于 1MB 的图片");else{var s=new FormData;s.append("file",t),this.uploadImage(s),this.$refs.selectImgInp.value=null}},uploadImage:function(e){var t=this;this.$http({url:this.$http.adornUrl("/upload/image"),method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var s=e.data;t.loading=!1,s.success?(t.imageUrl=s.url,t.sendImage()):t.$message.error(s.msg)})},delMsg:function(){},initWebSocket:function(){this.reconnectingNotified=!1,d(this.userId,this,this.onMessageReceived,this.onConnectionStatusChange)},onConnectionStatusChange:function(e){this.connectionStatus=e,"reconnecting"!==e||this.reconnectingNotified||(this.$message.error("WebSocket 连接断开，正在自动重连..."),this.reconnectingNotified=!0),"open"===e&&(this.$message.success("WebSocket 已连接"),this.reconnectingNotified=!1),"fail"===e&&this.$message.error("WebSocket 重连失败，请刷新页面")},sendText:function(){if(this.selectedUser){if(""!=this.msg.replace(/\s+/g,""))if(this.userId==this.selectPoolsId){var e=h(this.userId,this.selectedUser,0,this.msg);if(!p(e))return this.reconnectingNotified||(this.$message.error("WebSocket 断开，正在自动重连..."),this.reconnectingNotified=!0),void this.initWebSocket();this.messages.push(e),this.scrollToBottom(),this.msg=""}else this.$message.error("您不是当前用户的管理员,无法发送消息.")}else this.$message.error("请选择需要发送消息的用户.")},sendImage:function(){if(this.selectedUser)if(this.userId==this.selectPoolsId){if(""!=this.imageUrl.replace(/\s+/g,"")){var e=h(this.userId,this.selectedUser,1,this.imageUrl);if(!p(e))return this.reconnectingNotified||(this.$message.error("WebSocket 断开，正在自动重连..."),this.reconnectingNotified=!0),void this.initWebSocket();this.messages.push(e),this.scrollToBottom(),this.imageUrl=""}}else this.$message.error("您不是当前用户的管理员,无法发送消息.");else this.$message.error("请选择需要发送消息的用户.")},getMessageList:function(){var e=this;this.messages=[],this.$http({url:this.$http.adornUrl("/admin/message/getMessage"),method:"post",data:this.$http.adornData({id:this.selectedUser})}).then(function(t){var s=t.data;s.success?(e.messages=s.data,e.scrollToBottom()):(e.messages=[],e.$message.error(s.msg))})}}},S=A,v=(0,s(14486).A)(S,function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},["open"!==e.connectionStatus?t("div",{staticStyle:{background:"#f56c6c",color:"#fff",padding:"8px 16px","text-align":"center"}},["reconnecting"===e.connectionStatus?t("span",[e._v("WebSocket 连接断开，正在自动重连...")]):"fail"===e.connectionStatus?t("span",[e._v("WebSocket 重连失败，请刷新页面")]):"closed"===e.connectionStatus?t("span",[e._v("WebSocket 已断开")]):"error"===e.connectionStatus?t("span",[e._v("WebSocket 发生错误")]):e._e()]):e._e(),t("appLayout",{staticStyle:{display:"flex"},attrs:{showtop:!1,showleft:!0},scopedSlots:e._u([{key:"leftmain",fn:function(){return[t("div",{staticClass:"user-box"},[t("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("客户列表")]),t("div",{ref:"listUserRef",staticClass:"list-user"},e._l(e.users,function(s){return t("div",{key:s.id,staticClass:"user-tip",class:{selected:e.selectedUser===s.id},on:{click:function(t){return e.selectUser(s.id,s.wallet,s.poolsId)}}},[t("div",{staticClass:"iaccount"},[e._v(e._s(e.formatWallet(s.wallet))+"\n                            "),s.online?t("span",{class:["status","online"]},[e._v("(在线)")]):t("span",{class:["status","offline"]},[e._v("(离线)")]),t("br"),t("span",{staticClass:"last-date"},[e._v(" "+e._s(s.lastDate))]),t("span",{staticClass:"owner"},[e._v(" ("+e._s(s.ownerName)+"/"+e._s(s.inviter)+")")]),s.messageCount>0?t("span",{staticClass:"unread-badge"},[e._v(e._s(s.messageCount))]):e._e()])])}),0)])]},proxy:!0},{key:"dmain",fn:function(){return[t("div",{staticClass:"main",style:"height:calc(100vh - 160px)"},[t("div",{staticClass:"message-top"},[t("div",{staticClass:"text"},[e._v("与"+e._s(e.selectedUserName)+"的消息")]),0==e.selectedMessages.length?t("el-button",{attrs:{type:"danger",icon:"el-icon-select",size:"mini"},on:{click:e.selectMsg}},[e._v("选择消息")]):e._e(),e.selectedMessages.length>0?t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.deleteMessages}},[e._v("删除选中的消息")]):e._e(),e.cancelShow?t("el-button",{attrs:{type:"danger",icon:"el-icon-select",size:"mini"},on:{click:e.cancelMessages}},[e._v("取消")]):e._e()],1),t("div",{staticClass:"message-main",attrs:{id:"scrollBox"}},e._l(e.messages,function(s){return t("div",{key:s.id,staticClass:"messages"},[1===s.type&&s.senderId!=e.selectedUser?t("div",{staticClass:"box-message"},[t("img",{staticClass:"messageImg",attrs:{src:s.content,alt:""},on:{click:function(t){return e.openImageModal(s.content)}}}),t("div",{staticClass:"time-btn"},[e._v(e._s(s.created)+"\n                                "),e.isCheckboxDisabled?t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedMessages,expression:"selectedMessages"}],staticClass:"checkbox-small",attrs:{type:"checkbox"},domProps:{value:s.id,checked:Array.isArray(e.selectedMessages)?e._i(e.selectedMessages,s.id)>-1:e.selectedMessages},on:{change:function(t){var i=e.selectedMessages,n=t.target,a=!!n.checked;if(Array.isArray(i)){var c=s.id,r=e._i(i,c);n.checked?r<0&&(e.selectedMessages=i.concat([c])):r>-1&&(e.selectedMessages=i.slice(0,r).concat(i.slice(r+1)))}else e.selectedMessages=a}}}):e._e()])]):e._e(),0===s.type&&s.senderId!=e.selectedUser?t("div",{staticClass:"box-message"},[t("div",[e._v(e._s(s.content)+" ")]),t("div",{staticClass:"time-btn"},[e._v(e._s(s.created)+"\n                                "),e.isCheckboxDisabled?t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedMessages,expression:"selectedMessages"}],staticClass:"checkbox-small",attrs:{type:"checkbox"},domProps:{value:s.id,checked:Array.isArray(e.selectedMessages)?e._i(e.selectedMessages,s.id)>-1:e.selectedMessages},on:{change:function(t){var i=e.selectedMessages,n=t.target,a=!!n.checked;if(Array.isArray(i)){var c=s.id,r=e._i(i,c);n.checked?r<0&&(e.selectedMessages=i.concat([c])):r>-1&&(e.selectedMessages=i.slice(0,r).concat(i.slice(r+1)))}else e.selectedMessages=a}}}):e._e()])]):e._e(),1===s.type&&s.senderId==e.selectedUser?t("div",{staticClass:"left-box-message"},[t("img",{staticClass:"messageImg",attrs:{src:s.content,alt:""},on:{click:function(t){return e.openImageModal(s.content)}}}),t("div",{staticClass:"time-btn"},[e._v(e._s(s.created)+"\n                            ")])]):e._e(),0===s.type&&s.senderId==e.selectedUser?t("div",{staticClass:"left-box-message"},[t("div",[e._v(e._s(s.content)+" ")]),t("div",{staticClass:"time-btn"},[e._v(e._s(s.created)+"\n                            ")])]):e._e()])}),0),t("div",{staticClass:"message-bottom"},[t("div",{on:{click:e.sendMoreHandle}},[t("input",{ref:"selectImgInp",staticClass:"selectInp",attrs:{type:"file",accept:"image/*"},on:{change:e.handleFileChange}}),t("img",{staticClass:"sendImg",attrs:{src:s(1254),alt:""}})]),t("el-input",{attrs:{type:"textarea",rows:1},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendText.apply(null,arguments)}},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sendText}},[e._v(e._s(e.$t("message.37")))])],1)])]},proxy:!0}])}),t("el-dialog",{staticClass:"currentImgDialog",attrs:{visible:e.imageModalVisible,width:"50%","append-to-body":"",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.imageModalVisible=t},close:e.closeImageModal}},[t("img",{staticClass:"currentImg",staticStyle:{width:"100%"},attrs:{src:e.currentImage}})])],1)},[],!1,null,"4e43159a",null),b=v.exports},65290:function(e,t,s){e.exports=s.p+"static/media/y1478.8b23f63.wav"}}]);